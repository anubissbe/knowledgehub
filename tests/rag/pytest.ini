[tool:pytest]
# RAG-specific pytest configuration
minversion = 6.0
testpaths = .
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for RAG testing
markers =
    unit: Unit tests for individual RAG components
    integration: Integration tests across RAG modules
    performance: Performance and benchmark tests for RAG
    load: Load testing under stress conditions
    quality_gates: Quality gates validation
    ci_cd: CI/CD pipeline integration tests
    monitoring: Monitoring and alerting tests
    slow: Tests that take a long time to run
    rag: All RAG-related tests
    chunking: RAG chunking strategy tests
    retrieval: RAG retrieval strategy tests
    graphrag: GraphRAG and Neo4j integration tests
    llamaindex: LlamaIndex integration tests
    caching: RAG caching optimization tests
    e2e: End-to-end RAG workflow tests

# Test execution configuration
addopts = 
    -ra
    --strict-markers
    --strict-config
    --tb=short
    --durations=10
    --maxfail=5
    --disable-warnings

# Coverage configuration for RAG modules
# Note: Coverage args should be provided by test runner
# --cov=api.services.rag_pipeline
# --cov=api.services.graphrag_service
# --cov=api.services.llamaindex_rag_service
# --cov-report=term-missing
# --cov-report=html:htmlcov/rag
# --cov-fail-under=80

# Async test configuration
asyncio_mode = auto

# Timeout configuration
timeout = 300

# Logging configuration  
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Warning filters
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Collection configuration
collect_ignore = [
    "setup.py",
    "conftest_rag.py"
]

# Test discovery patterns
testpaths = unit integration performance
norecursedirs = 
    .git
    .tox
    dist
    build
    *.egg
    __pycache__
    .pytest_cache
    htmlcov
    reports

# Minimum Python version
minversion = 6.0
EOF < /dev/null
